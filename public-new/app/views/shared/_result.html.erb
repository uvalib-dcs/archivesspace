 <%# any result that is going to be presented in a list %>
 <%# Pry::ColorPrinter.pp(result['json'])%>
 <% if !props.fetch(:full,false) %>
   <div class="recordrow" style="clear:both">
     <% end %>
     <%= render partial: 'shared/idbadge', locals: {:result => result, :props => props } %>
     <div class="recordsummary" style="clear:both">
       <% if !result['parent_institution_name'].blank? %>
       <div><strong><%= t('parent_inst') %>:</strong>
         <%= result['parent_institution_name'] %>
       </div>
       <% end %>

       <% note_struct = result.note('abstract') 
	  if note_struct.blank? 
	    note_struct = result.note('scopecontent')
          end
	  if !note_struct['note_text'].blank? %>
          <div class="abstract single_note"><span class='inline-label'><%= note_struct['label'] %></span>
	   <%= note_struct['note_text'].html_safe %></div>
         <% end %>
       <% unless props.fetch(:no_repo, false) %>
       <% r_uri = nil
	  r_name = nil
	  if result['json']['repository'] && result['json']['repository']['_resolved'] && (!result['json']['repository']['ref'].blank? || !result['json']['repository']['_resolved']['name'].blank?)
	    r_uri = result['json']['repository']['ref'] || ''
	    r_name = result['json']['repository']['_resolved']['name'] || ''
	  elsif result['_resolved_repository'] && result['_resolved_repository']['json']
	   r_uri =  result['_resolved_repository']['json']['uri'] || ''
            r_name = result['_resolved_repository']['json']['name'] || ''
	  end
       %>
    <% end %>

    <% if result.resolved_repository %>
      <div class="result_context">
        <strong><%= t('context') %>: </strong>
        <span  class="repo_name">
          <%= link_to result.resolved_repository.fetch('name'), result.resolved_repository.fetch('uri') %>
        </span>
 
        <% if result.respond_to?(:ancestors) && result.ancestors %>
          <% result.ancestors.each do |ancestor| %>
            /
            <span class="ancestor">
            <%= link_to ancestor.fetch('title'), ancestor.fetch('uri') %> 
            </span>
          <% end %>
        <% else %>
          <% unless props.fetch(:no_res, false) || result.resolved_resource.blank? %>
            / 
            <span class="resource_name">
              <%= link_to process_mixed_content(result.resolved_resource.fetch('title')).html_safe, result.resolved_resource.fetch('uri') %>
            </span>
          <% end %>
        <% end %>
      </div>
    <% end %>


       <% if !props.fetch(:full,false)  && result['primary_type'] == 'repository' %>
       <div><strong><%= t('number_of', { :type => t('resource._plural') }) %></strong> <%= @counts[result.uri]['resource'] %></div>
       <% end %>
   </div>

<% if !props.fetch(:full,false) %>
   </div>
<% end %>
